-- Test case: Consistent borrow outcomes across all paths
-- This should be accepted by Beanstalk's global consistency requirement

-- This test demonstrates correct usage where the same place is
-- consistently borrowed across all control flow paths

data = "shared_data"
condition = true

if condition:
    -- On this path, data is borrowed (not last use)
    temp1 ~= data
    io(temp1)
    -- Use data again, preventing move
    io(data)
else
    -- On this path, data is also borrowed (not last use)
    temp2 ~= data
    io(temp2)
    -- Use data again, preventing move
    io(data)
;

-- Final use of data (this would be the actual last use)
final_result ~= data
io(final_result)

-- This is correct because:
-- 1. In both branches, data is borrowed (not the last use)
-- 2. The ownership outcome is consistent across all paths
-- 3. The actual move happens at the final usage point
-- 4. This satisfies Beanstalk's global consistency requirement